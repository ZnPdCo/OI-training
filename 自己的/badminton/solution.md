### 胡说八道
第一次出题，给了一些部分分，但是不知道一些部分分怎么拿，也不好评估难度，于是一些部分分就不讲，给那些有~~运气~~实力的人拿到，又有可能一些很接近正解的人得到较低的分值。

---
这题一看题，可以发现 $t$ 场对局相互独立，所以我们可以先关注小w赢一场的概率
# Case 1
关注 $u_i,v_i$ 有四个 $0$ 的情况，很明显获胜概率为 $0$。
# Case 2
对于 $u_i,v_i$ 有三个 $0$ 的情况，明显可以进行四个分类讨论，因为没有任何一种情况可以对局若干轮。
# Case 3
对于 $u_i$ 有 $0\to 2$个情况，就会进行多轮对打。

任意找到一组 $u_i,v_j$ 都非0的情况：

令这一组 $i,j$ 所对应的 $p_i,q_i$ 是  $x,y$

设 $f_i$ 表示小w和小x对打 $i$轮后双方均接中球的概率

显然转移方程为 $f_i=f_{i-1}\times x\times y$边界为 $f_0=1$

很明显 $f_i=(x\times y)^i$，这一轮小x获胜的概率为 $(x\times y)^{i-1}\times (1-x)$,小w获胜的概率为 $x^i\times y^{i-1}\times (1-y)$。

统计小w在每一轮获胜的概率总和，即
$$
\begin{aligned}
\sum x^i\times y^{i-1}\times (1-y)
&=\sum (x\times y)^i\times \frac{1-y}{y}\\
&=\frac{(x\times y)-(x\times y)^{n+1}}{1-x\times y}\times \frac{1-y}{y}
\end{aligned}
$$
最后特判一人没有体力打的情况

---
求出小w赢一场的概率后，只需要用组合数求出概率即可。

