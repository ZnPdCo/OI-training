# 2024-01-23 训练总结

## T1 种花

暴力枚举每个点作为种花的左上角，求出向下能延申和向右能延申的，统计答案。

## T2 find the most comfortable road

这题的确可以用最短路做，是正确的。

暴力枚举最大边，然后剔除边权大于这个值的边跑 dij 求出最大的“路径最小边权”。

用最大边减去最大的“路径最小边权”，就可以得到答案。

为什么是正确的，假设这条最优路径上最大边不是我们枚举的最大边，那么当我们枚举到更小的最大边时答案会更优，保证了答案的正确性。

时间复杂度可以做到 $O(n^3\log m)$，但是我没有优化，卡到了九百六十多毫秒。

## T3 喵了个喵

很容易得到 $k = 2n-2$ 的解法。

然后考虑多出来的一个 $w$ 怎么办。

我们设 $w$ 出现后第一次要消除栈底的栈是 $x$，栈底是 $u$，顶是 $v$。

有 $w<u$，我们可以放心放到特殊栈，因为 $u$ 出现之前都不用用到特殊栈。

有 $u<v$，我们可以放心放到 $x$ 栈，虽然这时我们无法消除 $v$，但是我们会先消除 $u$，之后就可以消除 $v$ 了。场面上依旧有空栈。

有 $u>v$，我们可以放心放到特殊栈，并把特殊栈改为 $x$。虽然这时我们无法消除底下，但是我们会先消除 $v$，之后就可以消除 $u$ 了，$u$ 出现之前都不用用到特殊栈。场面上依旧有空栈。

## T4 建造军营

边双缩点之后一个点就可以乱放。

接下来可以用树形dp解决。设 $f_{i,0/1}$ 表示子树是否有军营。
$$
f_{i,0}=2f_{j,0} \\
f_{i,1}=f_{i,1}*(2f_{i,0}+f_{i,1})+f_{i,0}*f_{j,1}
$$


